# =============================================================================
# PULSEPLAN BACKEND CONFIGURATION
# Copy this file to .env and update the values with your actual credentials
# =============================================================================

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
ENVIRONMENT=development
DEBUG=true
APP_NAME=PulsePlan
APP_HOST=0.0.0.0
APP_PORT=8000
APP_VERSION=1.0.0

# =============================================================================
# LEGACY SECURITY (keep for existing functionality)
# =============================================================================
SECRET_KEY=your_secret_key_here_change_in_production
TOKEN_ENCRYPTION_KEY=your_base64_encoded_token_encryption_key_here

# =============================================================================
# PRODUCTION SECURITY CONFIGURATION
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
HMAC_SECRET_KEY=your_64_character_hex_secret_key_here

# Input validation
MAX_QUERY_LENGTH=10000
MAX_PARAMETER_LENGTH=5000
ENABLE_CONTENT_FILTERING=true
ENABLE_INPUT_VALIDATION=true
ENABLE_PAYLOAD_SIGNING=true
SIGNATURE_TTL_SECONDS=300

# Security thresholds
MAX_SUSPICIOUS_ACTIVITY_COUNT=5
SUSPICIOUS_ACTIVITY_WINDOW_SECONDS=300

# =============================================================================
# UPSTASH REDIS CONFIGURATION
# =============================================================================
# IMPORTANT: Get Redis URL from Upstash console - it should start with rediss://
# Go to console.upstash.com -> your database -> Details -> Redis Connect
# Format: rediss://default:your_password@your-endpoint.upstash.io:6379
REDIS_URL=rediss://default:your_password@your-endpoint.upstash.io:6379

# Legacy Upstash REST (keep for compatibility)
UPSTASH_REDIS_REST_URL=https://your-endpoint.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_upstash_rest_token

# Redis Connection Settings
REDIS_POOL_SIZE=10
REDIS_MAX_CONNECTIONS=20
REDIS_TIMEOUT=5
REDIS_SSL_CERT_REQS=required
REDIS_SSL_CHECK_HOSTNAME=true
REDIS_SOCKET_KEEPALIVE=true
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
# Default rate limits
RATE_LIMIT_PER_MINUTE=20
RATE_LIMIT_PER_HOUR=200
RATE_LIMIT_PER_DAY=2000
RATE_LIMIT_BURST_ALLOWANCE=10

# Global limits (across all users)
GLOBAL_RATE_LIMIT_PER_MINUTE=2000
GLOBAL_RATE_LIMIT_PER_HOUR=20000

# Workflow-specific rate limits
TODO_RATE_LIMIT_PER_MINUTE=30
TODO_RATE_LIMIT_PER_HOUR=300
TODO_RATE_LIMIT_PER_DAY=3000

CALENDAR_RATE_LIMIT_PER_MINUTE=15
CALENDAR_RATE_LIMIT_PER_HOUR=150
CALENDAR_RATE_LIMIT_PER_DAY=1000

EMAIL_RATE_LIMIT_PER_MINUTE=10
EMAIL_RATE_LIMIT_PER_HOUR=100
EMAIL_RATE_LIMIT_PER_DAY=500

LLM_RATE_LIMIT_PER_MINUTE=25
LLM_RATE_LIMIT_PER_HOUR=250
LLM_RATE_LIMIT_PER_DAY=2000

# =============================================================================
# CIRCUIT BREAKER CONFIGURATION
# =============================================================================
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2

# Service-specific circuit breakers
LLM_CIRCUIT_BREAKER_FAILURE_THRESHOLD=3
LLM_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=30

DB_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
DB_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

CALENDAR_CIRCUIT_BREAKER_FAILURE_THRESHOLD=3
CALENDAR_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=45

EMAIL_CIRCUIT_BREAKER_FAILURE_THRESHOLD=3
EMAIL_CIRCUIT_BREAKER_RECOVERY_TIMEOUT=45

# =============================================================================
# RETRY STRATEGY CONFIGURATION
# =============================================================================
MAX_RETRIES=3
BASE_RETRY_DELAY=1.0
MAX_RETRY_DELAY=60.0
RETRY_JITTER=true

LLM_MAX_RETRIES=2
DB_MAX_RETRIES=3
EXTERNAL_SERVICE_MAX_RETRIES=3

# =============================================================================
# OPENAI / LLM CONFIGURATION
# =============================================================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-your_openai_api_key_here
OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0.0
OPENAI_MAX_TOKENS=1000
OPENAI_TIMEOUT=30

# LLM behavior
ENABLE_LLM_CACHING=true
LLM_CACHE_TTL_SECONDS=300

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_INTERVAL_SECONDS=60
HEALTH_CHECK_TIMEOUT_SECONDS=5

DB_HEALTH_TIMEOUT_SECONDS=10
REDIS_HEALTH_TIMEOUT_SECONDS=5
LLM_HEALTH_TIMEOUT_SECONDS=30

MEMORY_WARNING_THRESHOLD=80
MEMORY_CRITICAL_THRESHOLD=90

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=INFO
ENABLE_STRUCTURED_LOGGING=true
LOG_TO_FILE=false
LOG_FILE_PATH=logs/app.log

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
# Get these from your Supabase project settings
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_SERVICE_KEY=your_supabase_service_role_key_here

# =============================================================================
# OAUTH CONFIGURATION
# =============================================================================
# Google OAuth - Get from Google Cloud Console
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URL=https://your-domain.com/api/v1/oauth/google/callback

# Microsoft OAuth - Get from Azure App Registrations
MICROSOFT_CLIENT_ID=your_microsoft_client_id
MICROSOFT_CLIENT_SECRET=your_microsoft_client_secret
MICROSOFT_REDIRECT_URL=http://localhost:8000/api/v1/oauth/microsoft/callback

# =============================================================================
# CLIENT CONFIGURATION
# =============================================================================
CLIENT_URL=http://localhost:8081

# =============================================================================
# EXTERNAL APIS
# =============================================================================
# Tavily API for web search - Get from tavily.com
TAVILY_API_KEY=tvly-your_tavily_api_key_here

# =============================================================================
# EMAIL SERVICE CONFIGURATION
# =============================================================================
# Resend API for sending emails - Get from resend.com
RESEND_API_KEY=re_your_resend_api_key_here
RESEND_FROM_EMAIL=noreply@pulseplan.com